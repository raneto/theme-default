((i,t)=>{var a,o="undefined"==typeof rn_base_url?"":rn_base_url;i(document).ready(function(){i(".content").length&&(t.highlightAll(),i(".content table").addClass("table")),i("#add-page-confirm").click(function(){i("#addModal").modal("hide");var e=i("#page-name").val().replace(/\s+/g,"-");i.post(o+"/rn-add-page",{name:e,category:a},function(t){0===t.status&&(t=[""],""!==a&&t.push(a),t.push(e),t.push("edit"),window.location=o+t.join("/"))}).fail(function(t){403===t.status&&(window.location=o+"/login")})}),i("#delete-page-confirm").click(function(){var t=window.location.pathname,e=o.replace(window.location.origin,""),a=t;"/"===(a=e&&0===t.indexOf(e)?t.substring(e.length):a).charAt(0)&&(a=a.substring(1)),i("#deleteModal").modal("hide"),i.post(o+"/rn-delete",{file:decodeURI(a)},function(t){0===t.status&&(window.location=o+"/")}).fail(function(t){403===t.status&&(window.location=o+"/login")})}),i(".add-page").click(function(){var t=i(this).closest("h5").children().eq(0).text().trim().toLowerCase().replace(/\s+/g,"-");a="main-articles"!==t?t:""}),setTimeout(function(){i("li.category").on("click",function(t){i(t.target).is("a, button, input, .add-page")||i(t.target).closest("a, button, .add-page").length||(t=i(this).find(".category-title-text a[data-bs-toggle='collapse']")).length&&t[0].click()})},100),i("#newCategory").keypress(function(t){13===t.which&&i.post(o+"/rn-add-category",{category:i(this).val().trim().toLowerCase().replace(/\s+/g,"-")},function(t){location.reload()}).fail(function(t){403===t.status&&(window.location=o+"/login")})}),i(".close-edit").click(function(){var t=window.location.href.split("/");t.pop(),window.location=t.join("/")}),i.getJSON(o+"/translations/"+i("html").prop("lang")+".json",null,function(n){i(".save-page").click(function(){var t=window.location.pathname,e=o.replace(window.location.origin,""),e=((t="/"===(t=e&&0===t.indexOf(e)?t.substring(e.length):t).charAt(0)?t.substring(1):t).endsWith("/edit")&&(t=t.substring(0,t.length-5)),i("#entry-markdown")),a=e.data("cmView");a&&e.val(a.state.doc.toString()),i.post(o+"/rn-edit",{file:decodeURI(t),content:e.val(),meta_title:i("#entry-metainfo-title").val(),meta_description:i("#entry-metainfo-description").val(),meta_sort:i("#entry-metainfo-sort").val()},function(t){switch(t.status){case 0:i("#edit-status").slideUp(function(){i("#edit-status").text(n.edit.pageSaved),i("#edit-status").removeClass(),i("#edit-status").addClass("alert alert-success"),i("#edit-status").slideDown()});break;case 1:i("#edit-status").slideUp(function(){i("#edit-status").text(n.edit.pageSaveError),i("#edit-status").removeClass(),i("#edit-status").addClass("alert alert-warning"),i("#edit-status").slideDown()})}}).fail(function(t){403===t.status&&(window.location=o+"/login")})})})})})(jQuery,hljs);