!function(i,t){var n,o="undefined"==typeof rn_base_url?"":rn_base_url;i(document).ready(function(){i(".content").length&&(t.highlightAll(),i(".content table").addClass("table"),fitvids(".content")),i(".home-categories").length&&i(".home-categories").masonry({columnWidth:".col",itemSelector:".col",transitionDuration:0}),i("#add-page-confirm").click(function(){i("#addModal").modal("hide");var e=i("#page-name").val().replace(/\s+/g,"-");i.post(o+"/rn-add-page",{name:e,category:n},function(t){0===t.status&&(t=[""],""!==n&&t.push(n),t.push(e),t.push("edit"),window.location=o+t.join("/"))}).fail(function(t){403===t.status&&(window.location=o+"/login")})}),i("#delete-page-confirm").click(function(){var t=window.location.pathname.split("/"),e=o.split("/");t.splice(0,e.length,""),i("#deleteModal").modal("hide"),i.post(o+"/rn-delete",{file:decodeURI(t.join("/"))},function(t){0===t.status&&(window.location=o+"/")}).fail(function(t){403===t.status&&(window.location=o+"/login")})}),i(".add-page").click(function(){var t=i(this).closest("h5").children().eq(0).text().trim().toLowerCase().replace(/\s+/g,"-");n="main-articles"!==t?t:""}),i("#newCategory").keypress(function(t){13===t.which&&i.post(o+"/rn-add-category",{category:i(this).val().trim().toLowerCase().replace(/\s+/g,"-")},function(t){location.reload()}).fail(function(t){403===t.status&&(window.location=o+"/login")})}),i(".close-edit").click(function(){var t=window.location.href.split("/");t.pop(),window.location=t.join("/")}),i.getJSON(o+"/translations/"+i("html").prop("lang")+".json",null,function(n){i(".save-page").click(function(){var t=window.location.pathname.split("/"),e=o.split("/");t.splice(0,e.length,""),t.pop(),i("#entry-markdown").next(".CodeMirror")[0].CodeMirror.save(),i.post(o+"/rn-edit",{file:decodeURI(t.join("/")),content:i("#entry-markdown").val(),meta_title:i("#entry-metainfo-title").val(),meta_description:i("#entry-metainfo-description").val(),meta_sort:i("#entry-metainfo-sort").val()},function(t){switch(t.status){case 0:i("#edit-status").slideUp(function(){i("#edit-status").text(n.edit.pageSaved),i("#edit-status").removeClass(),i("#edit-status").addClass("alert alert-success"),i("#edit-status").slideDown()});break;case 1:i("#edit-status").slideUp(function(){i("#edit-status").text(n.edit.pageSaveError),i("#edit-status").removeClass(),i("#edit-status").addClass("alert alert-warning"),i("#edit-status").slideDown()})}}).fail(function(t){403===t.status&&(window.location=o+"/login")})})})})}(jQuery,hljs);