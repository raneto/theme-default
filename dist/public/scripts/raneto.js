((n,t)=>{var i,o="undefined"==typeof rn_base_url?"":rn_base_url;n(document).ready(function(){n(".content").length&&(t.highlightAll(),n(".content table").addClass("table"),fitvids(".content")),n(".home-categories").length&&n(".home-categories").masonry({columnWidth:".col",itemSelector:".col",transitionDuration:0}),n("#add-page-confirm").click(function(){n("#addModal").modal("hide");var e=n("#page-name").val().replace(/\s+/g,"-");n.post(o+"/rn-add-page",{name:e,category:i},function(t){0===t.status&&(t=[""],""!==i&&t.push(i),t.push(e),t.push("edit"),window.location=o+t.join("/"))}).fail(function(t){403===t.status&&(window.location=o+"/login")})}),n("#delete-page-confirm").click(function(){var t=window.location.pathname.split("/"),e=o.split("/");t.splice(0,e.length,""),n("#deleteModal").modal("hide"),n.post(o+"/rn-delete",{file:decodeURI(t.join("/"))},function(t){0===t.status&&(window.location=o+"/")}).fail(function(t){403===t.status&&(window.location=o+"/login")})}),n(".add-page").click(function(){var t=n(this).closest("h5").children().eq(0).text().trim().toLowerCase().replace(/\s+/g,"-");i="main-articles"!==t?t:""}),n("#newCategory").keypress(function(t){13===t.which&&n.post(o+"/rn-add-category",{category:n(this).val().trim().toLowerCase().replace(/\s+/g,"-")},function(t){location.reload()}).fail(function(t){403===t.status&&(window.location=o+"/login")})}),n(".close-edit").click(function(){var t=window.location.href.split("/");t.pop(),window.location=t.join("/")}),n.getJSON(o+"/translations/"+n("html").prop("lang")+".json",null,function(i){n(".save-page").click(function(){var t=window.location.pathname.split("/"),e=o.split("/");t.splice(0,e.length,""),t.pop(),n("#entry-markdown").next(".CodeMirror")[0].CodeMirror.save(),n.post(o+"/rn-edit",{file:decodeURI(t.join("/")),content:n("#entry-markdown").val(),meta_title:n("#entry-metainfo-title").val(),meta_description:n("#entry-metainfo-description").val(),meta_sort:n("#entry-metainfo-sort").val()},function(t){switch(t.status){case 0:n("#edit-status").slideUp(function(){n("#edit-status").text(i.edit.pageSaved),n("#edit-status").removeClass(),n("#edit-status").addClass("alert alert-success"),n("#edit-status").slideDown()});break;case 1:n("#edit-status").slideUp(function(){n("#edit-status").text(i.edit.pageSaveError),n("#edit-status").removeClass(),n("#edit-status").addClass("alert alert-warning"),n("#edit-status").slideDown()})}}).fail(function(t){403===t.status&&(window.location=o+"/login")})})})})})(jQuery,hljs);